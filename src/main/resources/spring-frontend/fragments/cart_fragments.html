<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<span th:fragment="cartBooks(books)">
  <div class="Cart-product" th:each="book : ${books}">
    <div class="Cart-block Cart-block_row">
      <div class="Cart-block Cart-block_pict">
        <a class="Cart-pict" href="#">
          <img class="Cart-img" src="/assets/img/content/main/card.jpg" alt="card.jpg"/>
        </a>
      </div>
      <div class="Cart-block Cart-block_row">
        <div class="Cart-block Cart-block_info">
          <div class="Cart-author">
            <a href="#" th:href="${'/authors/' + book.authorId}" th:text="${book.author}">Борис Васильевич Бедный</a>
          </div>
          <div class="Cart-title"><a href="#" th:href="${'/books/' + book.id}" th:text="${book.title}">Жизнь</a></div>
          <div class="Cart-rating">
            <span class="Rating">
              <span th:replace="~{fragments/book_fragments :: intStars(${book.rating})}"></span>
            </span>
          </div>
          <div class="Cart-buttons">
            <div class="Cart-btn">
              <button class="btn btn_primary btn_outline" data-sendstatus="KEPT" data-bookid="[1122]">
                <span class="btn-icon">
                  <img src="/assets/img/icons/heart.svg" alt="heart.svg"/>
                </span>
                <span class="btn-content" th:text="#{cartbook.bookmark}">Отложить</span>
              </button>
            </div>
            <div class="Cart-btn">
              <button class="btn btn_danger btn_outline" data-sendstatus="UNLINK" data-bookid="[1122]">
                <span class="btn-icon">
                  <img src="/assets/img/icons/trash.svg" alt="trash.svg"/>
                </span>
                <span class="btn-content" th:text="#{cartbook.delete}">Удалить</span>
              </button>
            </div>
          </div>
        </div>
        <div class="Cart-block Cart-block_price">
          <div th:text="${price}"></div>
          <div class="Cart-priceTitle" th:text="#{cartbook.price}">Цена:</div>
          <div class="Cart-price Cart-price_old" th:text="${book.priceOld}">254 р.</div>
          <div class="Cart-price" th:text="${book.price}">180 р.</div>
          <div
                  class="Cart-sale"
                  th:with="price=${T(Double).parseDouble(#strings.replace(book.price,'$',''))},priceOld=${T(Double).parseDouble(#strings.replace(book.priceOld,'$',''))}"
                  th:text="${T(Math).round(((price / priceOld) - 1) * 100) + '%'}">
            -30%
          </div>
        </div>
      </div>
    </div>
  </div>
</span>
</body>
</html>